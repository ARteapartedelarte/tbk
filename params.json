{"name":"TBK","tagline":"Python implementation of Transbank's Webpay protocol","body":"tbk - Transbank's Webpay protocol\r\n=================================\r\n\r\n**Attention: Beta not ready for production**\r\n\r\nPython implementation of Transbank's Webpay protocol. A port from ruby\r\nimplementation <http://github.com/sagmor/tbk>.\r\n\r\n[![Build\r\nStatus](https://travis-ci.org/pedroburon/tbk.svg)](https://travis-ci.org/pedroburon/tbk)\r\n[![Coverage\r\nStatus](https://img.shields.io/coveralls/pedroburon/tbk.svg)](https://coveralls.io/r/pedroburon/tbk)\r\n\r\nInstallation\r\n------------\r\n\r\n    pip install tbk\r\n\r\nUsage\r\n-----\r\n\r\nSet environment variable for Commerce and initialize.\r\n\r\n    os.environ['TBK_COMMERCE_ID'] = \"597026007976\"\r\n    os.environ['TBK_COMMERCE_KEY'] = \"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAn3HzPC1ZBzCO3edUCf/XJiwj3bzJpjjTi/zBO9O+DDzZCaMp...\"\"\r\n\r\n    from tbk.webpay.commerce import Commerce        \r\n    commerce = Commerce.create_commerce()\r\n\r\nIf you want to set the official webpay log (for certification issues):\r\n\r\n    from tbk.webpay.logging import configure_logger\r\n    from tbk.webpay.logging.official import WebpayOfficialHandler\r\n\r\n    configure_logger(WebpayOfficialHandler(LOG_BASE_PATH))\r\n\r\nCreate a new payment and redirect user.\r\n\r\n    from tbk.webpay.payment import Payment\r\n\r\n    payment = Payment(\r\n        request_ip='123.123.123.123',\r\n        commerce=commerce,\r\n        success_url='http://localhost:8080/webpay/success/',\r\n        confirmation_url='http://127.0.0.1:8080/webpay/confirmation/',\r\n        failure_url='http://localhost:8080/webpay/failure/',\r\n        session_id='SOME_SESSION_VALUE',\r\n        amount=123456,\r\n        order_id=1,\r\n    )\r\n    payment.redirect_url\r\n\r\nThen to confirm payment, use an endpoint with:\r\n\r\n    from tbk.webpay.confirmation import Confirmation\r\n\r\n    def confirmation(request):\r\n        conf = Confirmation(\r\n            commerce=commerce,\r\n            request_ip=request.ip_address,\r\n            data=request.POST\r\n        )\r\n\r\n        if validate_confirmation(conf) or not conf.is_success() :\r\n            return HttpResponse(conf.reject)\r\n\r\n        return HttpResponse(conf.acknowledge)\r\n\r\nMore info at <http://github.com/sagmor/tbk>\r\n\r\nDevelopment\r\n-----------\r\n\r\nAfter cloning the repo:\r\n\r\n    python setup.py develop\r\n\r\nFor testing purposes:\r\n\r\n    python setup.py test\r\n\r\nRecommended:\r\n\r\n    pip install nosy\r\n    nosy\r\n\r\nAbout webpay communication protocol:\r\n<http://sagmor.com/rants/technical/webpay-communication-protocol/","google":"UA-20399876-2","note":"Don't delete this file! It's used internally to help with page regeneration."}